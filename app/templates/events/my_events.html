{% extends "base.html" %}

{% block title %}My Events - CommUnity{% endblock %}

{% block content %}
<div class="relative flex h-full w-full flex-col min-h-screen pb-24 bg-background-light dark:bg-background-dark overflow-hidden">
    <!-- Header -->
    <div class="sticky top-0 z-30 bg-white/90 dark:bg-surface-dark/90 backdrop-blur-lg border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-6">
            <div class="flex items-center gap-3">
                <a href="/events" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-slate-900 dark:text-white">arrow_back</span>
                </a>
                <h1 class="text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white">My Events</h1>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="flex-1 overflow-y-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8">
            <!-- Organized Events -->
            <div class="mb-8">
                <div class="flex items-center gap-3 mb-4">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30">
                        <span class="material-symbols-outlined text-purple-600 dark:text-purple-400">event</span>
                    </div>
                    <h2 class="text-xl lg:text-2xl font-bold text-slate-900 dark:text-white">
                        My Organized Events ({{ organized_events|length }})
                    </h2>
                </div>
                
                {% if organized_events %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6">
                    {% for event in organized_events %}
                    <a href="/events/{{ event.id }}" class="group bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-all">
                        <div class="relative h-40 lg:h-48 overflow-hidden">
                            <img src="{{ event.image_url or 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800' }}" alt="{{ event.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            <div class="absolute top-3 right-3 px-3 py-1.5 rounded-full bg-purple-500 text-white text-xs font-bold">
                                Organizer
                            </div>
                        </div>
                        <div class="p-4 lg:p-5">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-bold">{{ event.category }}</span>
                            </div>
                            <h3 class="text-base lg:text-lg font-bold text-slate-900 dark:text-white mb-2 line-clamp-2 group-hover:text-primary transition-colors">{{ event.title }}</h3>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-2">
                                <span class="material-symbols-outlined text-base">schedule</span>
                                <span>{{ event.date_time.strftime('%b %d, %I:%M %p') }}</span>
                            </div>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-3">
                                <span class="material-symbols-outlined text-base">location_on</span>
                                <span class="line-clamp-1">{{ event.location }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400">
                                    <span class="material-symbols-outlined text-base">group</span>
                                    <span class="font-semibold">{{ event.attendee_count }} going</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <div class="bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 p-8 lg:p-12 text-center">
                    <div class="flex justify-center mb-4">
                        <div class="flex items-center justify-center w-16 h-16 rounded-full bg-purple-100 dark:bg-purple-900/30">
                            <span class="material-symbols-outlined text-3xl text-purple-600 dark:text-purple-400">event</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-2">No events organized yet</h3>
                    <p class="text-slate-500 dark:text-slate-400 mb-4">Create your first event and start bringing people together!</p>
                    <a href="/events/create" class="inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primary/90 text-white font-semibold rounded-xl transition-colors">
                        <span class="material-symbols-outlined">add</span>
                        Create Event
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Going Events -->
            <div class="mb-8">
                <div class="flex items-center gap-3 mb-4">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30">
                        <span class="material-symbols-outlined text-green-600 dark:text-green-400">check_circle</span>
                    </div>
                    <h2 class="text-xl lg:text-2xl font-bold text-slate-900 dark:text-white">
                        Going ({{ going_events|length }})
                    </h2>
                </div>
                
                {% if going_events %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6">
                    {% for event in going_events %}
                    <a href="/events/{{ event.id }}" class="group bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-all">
                        <div class="relative h-40 lg:h-48 overflow-hidden">
                            <img src="{{ event.image_url or 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800' }}" alt="{{ event.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            <div class="absolute top-3 right-3 px-3 py-1.5 rounded-full bg-green-500 text-white text-xs font-bold">
                                Going
                            </div>
                        </div>
                        <div class="p-4 lg:p-5">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-bold">{{ event.category }}</span>
                            </div>
                            <h3 class="text-base lg:text-lg font-bold text-slate-900 dark:text-white mb-2 line-clamp-2 group-hover:text-primary transition-colors">{{ event.title }}</h3>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-2">
                                <span class="material-symbols-outlined text-base">schedule</span>
                                <span>{{ event.date_time.strftime('%b %d, %I:%M %p') }}</span>
                            </div>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-3">
                                <span class="material-symbols-outlined text-base">location_on</span>
                                <span class="line-clamp-1">{{ event.location }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400">
                                    <span class="material-symbols-outlined text-base">group</span>
                                    <span class="font-semibold">{{ event.attendee_count }} going</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <div class="bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 p-8 lg:p-12 text-center">
                    <div class="flex justify-center mb-4">
                        <div class="flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800">
                            <span class="material-symbols-outlined text-4xl text-slate-400">event_busy</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-2">No Events Yet</h3>
                    <p class="text-slate-500 dark:text-slate-400 mb-6">You haven't marked any events as "going" yet.</p>
                    <a href="/events" class="inline-block px-6 py-3 bg-primary hover:bg-primary/90 text-white font-bold rounded-xl transition-colors">
                        Discover Events
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Interested Events -->
            <div>
                <div class="flex items-center gap-3 mb-4">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/30">
                        <span class="material-symbols-outlined text-yellow-600 dark:text-yellow-400">star</span>
                    </div>
                    <h2 class="text-xl lg:text-2xl font-bold text-slate-900 dark:text-white">
                        Interested ({{ interested_events|length }})
                    </h2>
                </div>
                
                {% if interested_events %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6">
                    {% for event in interested_events %}
                    <a href="/events/{{ event.id }}" class="group bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-all">
                        <div class="relative h-40 lg:h-48 overflow-hidden">
                            <img src="{{ event.image_url or 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800' }}" alt="{{ event.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            <div class="absolute top-3 right-3 px-3 py-1.5 rounded-full bg-yellow-500 text-white text-xs font-bold">
                                Interested
                            </div>
                        </div>
                        <div class="p-4 lg:p-5">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-bold">{{ event.category }}</span>
                            </div>
                            <h3 class="text-base lg:text-lg font-bold text-slate-900 dark:text-white mb-2 line-clamp-2 group-hover:text-primary transition-colors">{{ event.title }}</h3>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-2">
                                <span class="material-symbols-outlined text-base">schedule</span>
                                <span>{{ event.date_time.strftime('%b %d, %I:%M %p') }}</span>
                            </div>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-3">
                                <span class="material-symbols-outlined text-base">location_on</span>
                                <span class="line-clamp-1">{{ event.location }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400">
                                    <span class="material-symbols-outlined text-base">group</span>
                                    <span class="font-semibold">{{ event.attendee_count }} going</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <div class="bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 p-8 lg:p-12 text-center">
                    <div class="flex justify-center mb-4">
                        <div class="flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800">
                            <span class="material-symbols-outlined text-4xl text-slate-400">stars</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-2">No Interested Events</h3>
                    <p class="text-slate-500 dark:text-slate-400 mb-6">You haven't marked any events as "interested" yet.</p>
                    <a href="/events" class="inline-block px-6 py-3 bg-primary hover:bg-primary/90 text-white font-bold rounded-xl transition-colors">
                        Explore Events
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Saved Events -->
            <div class="mt-8">
                <div class="flex items-center gap-3 mb-4">
                    <div class="flex items-center justify-center w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30">
                        <span class="material-symbols-outlined text-red-600 dark:text-red-400">favorite</span>
                    </div>
                    <h2 class="text-xl lg:text-2xl font-bold text-slate-900 dark:text-white">
                        Saved ({{ saved_events|length }})
                    </h2>
                </div>
                
                {% if saved_events %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6">
                    {% for event in saved_events %}
                    <a href="/events/{{ event.id }}" class="group bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-all">
                        <div class="relative h-40 lg:h-48 overflow-hidden">
                            <img src="{{ event.image_url or 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800' }}" alt="{{ event.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            <div class="absolute top-3 right-3 px-3 py-1.5 rounded-full bg-red-500 text-white text-xs font-bold">
                                Saved
                            </div>
                        </div>
                        <div class="p-4 lg:p-5">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-bold">{{ event.category }}</span>
                            </div>
                            <h3 class="text-base lg:text-lg font-bold text-slate-900 dark:text-white mb-2 line-clamp-2 group-hover:text-primary transition-colors">{{ event.title }}</h3>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-2">
                                <span class="material-symbols-outlined text-base">schedule</span>
                                <span>{{ event.date_time.strftime('%b %d, %I:%M %p') }}</span>
                            </div>
                            <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 mb-3">
                                <span class="material-symbols-outlined text-base">location_on</span>
                                <span class="line-clamp-1">{{ event.location }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400">
                                    <span class="material-symbols-outlined text-base">group</span>
                                    <span class="font-semibold">{{ event.attendee_count }} going</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <div class="bg-white dark:bg-surface-dark rounded-2xl lg:rounded-3xl border border-slate-100 dark:border-slate-700 p-8 lg:p-12 text-center">
                    <div class="flex justify-center mb-4">
                        <div class="flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800">
                            <span class="material-symbols-outlined text-4xl text-slate-400">favorite_border</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-2">No Saved Events</h3>
                    <p class="text-slate-500 dark:text-slate-400 mb-6">You haven't saved any events yet. Save events to easily find them later!</p>
                    <a href="/events" class="inline-block px-6 py-3 bg-primary hover:bg-primary/90 text-white font-bold rounded-xl transition-colors">
                        Discover Events
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 z-40 w-full bg-white/90 dark:bg-surface-dark/90 backdrop-blur-lg border-t border-slate-200 dark:border-slate-800 pb-safe">
        <div class="flex items-center justify-around h-16 lg:h-20 px-2 lg:px-4 max-w-7xl mx-auto">
            <a href="/dashboard" class="flex flex-col items-center justify-center w-full h-full gap-1 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300">
                <span class="material-symbols-outlined text-2xl lg:text-3xl">home</span>
                <span class="text-[10px] lg:text-xs font-medium">Home</span>
            </a>
            <a href="/events" class="flex flex-col items-center justify-center w-full h-full gap-1 text-primary">
                <span class="material-symbols-outlined filled text-2xl lg:text-3xl" style="font-variation-settings: 'FILL' 1;">explore</span>
                <span class="text-[10px] lg:text-xs font-bold">Explore</span>
            </a>
            <a href="/chat" class="flex flex-col items-center justify-center w-full h-full gap-1 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300">
                <div class="relative">
                    <span class="material-symbols-outlined text-2xl lg:text-3xl">chat</span>
                    <span class="absolute -top-1 -right-1 size-2.5 bg-red-500 rounded-full border-2 border-white dark:border-surface-dark"></span>
                </div>
                <span class="text-[10px] lg:text-xs font-medium">Chat</span>
            </a>
            <a href="/profile" class="flex flex-col items-center justify-center w-full h-full gap-1 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300">
                <span class="material-symbols-outlined text-2xl lg:text-3xl">person</span>
                <span class="text-[10px] lg:text-xs font-medium">Profile</span>
            </a>
            <a href="/auth/logout" class="flex flex-col items-center justify-center w-full h-full gap-1 text-slate-400 dark:text-slate-500 hover:text-red-500 dark:hover:text-red-400 transition-colors">
                <span class="material-symbols-outlined text-2xl lg:text-3xl">logout</span>
                <span class="text-[10px] lg:text-xs font-medium">Logout</span>
            </a>
        </div>
    </nav>
</div>
{% endblock %}
